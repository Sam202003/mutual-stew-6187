
var React = require('react');
var E = React.createElement;

/**
 * React Node
 */

module.exports = function() {
  var args = arguments;
  var opts = {};
  var chrn = [];

  switch(args.length) {
  case 2:
    args[1] === Object(args[1])
      ? opts = args[1]
      : chrn = args[1];
    break
  case 3:
    opts = args[1];
    chrn = args[2];
    break
  }

  args = [args[0], opts].concat(chrn);

  if('string' == typeof args[0]) {
    args[0] = parse(args[0], opts);
  }

  return E.apply(null, args);
};

/**
 * Parses a selector
 *
 * @param {Mixed} comp
 * @param {Object} [opts]
 * @return {String} comp
 */

function parse(comp, opts) {
  var regex = /([\.|#]?[\w-]+)/g;
  var parts = comp.match(regex);
  var psize = parts.length;
  var part;

  comp = !/^#|\./.test(parts[0])
    ? parts[0]
    : 'div';

  while(psize--) {
    part = parts[psize];

    switch(true) {
    case part[0] == '.':
      opts.className || (opts.className = '');
      opts.className += ' ' + part.substring(1);
      break
    case part[0] == '#' && !opts.id:
      opts.id = part.substring(1);
      break
    }
  }

  return comp;
};

