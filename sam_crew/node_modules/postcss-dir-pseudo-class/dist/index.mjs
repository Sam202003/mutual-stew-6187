<<<<<<< HEAD
import e from"postcss-selector-parser";function t(t){const r=Object(t).dir,o=Boolean(Object(t).preserve),s=Boolean(Object(t).shadow);return{postcssPlugin:"postcss-dir-pseudo-class",Rule(t,{result:a}){let n,l=!1;if(t.selector.toLowerCase().includes(":dir(")){try{n=e((o=>{o.nodes.forEach((o=>{o.walk((o=>{if("pseudo"!==o.type)return;if(":dir"!==o.value.toLowerCase())return;if(!o.nodes||!o.nodes.length)return;const n=o.nodes.toString().toLowerCase();if("rtl"!==n&&"ltr"!==n)return;const c=o.parent;c.nodes.filter((e=>"pseudo"===e.type&&":dir"===e.value.toLowerCase())).length>1&&!l&&(l=!0,t.warn(a,`Hierarchical :dir pseudo class usage can't be transformed correctly to [dir] attributes. This will lead to incorrect selectors for "${t.selector}"`));const p=o.prev(),i=o.next(),d=p&&p.type&&"combinator"!==p.type,u=i&&i.type&&"combinator"!==i.type,v=i&&i.type&&("combinator"!==i.type||"combinator"===i.type&&" "===i.value);d||u||0===c.nodes.indexOf(o)&&v||1===c.nodes.length?o.remove():o.replaceWith(e.universal());const f=c.nodes[0],b=f&&"combinator"===f.type&&" "===f.value,y=f&&"tag"===f.type&&"html"===f.value.toLowerCase(),m=f&&"pseudo"===f.type&&":root"===f.value.toLowerCase();!f||y||m||b||c.prepend(e.combinator({value:" "}));const h=r===n,w=e.attribute({attribute:"dir",operator:"=",quoteMark:'"',value:`"${n}"`}),g=e.pseudo({value:":host-context"});g.append(w);const C=e.pseudo({value:(y||m?"":"html")+":not"});C.append(e.attribute({attribute:"dir",operator:"=",quoteMark:'"',value:`"${"ltr"===n?"rtl":"ltr"}"`})),h?y?c.insertAfter(f,C):c.prepend(C):y?c.insertAfter(f,w):s&&!m?c.prepend(g):c.prepend(w)}))}))})).processSync(t.selector)}catch(e){return void t.warn(a,`Failed to parse selector : ${t.selector}`)}void 0!==n&&n!==t.selector&&(t.cloneBefore({selector:n}),o||t.remove())}}}}t.postcss=!0;export{t as default};
=======
import e from"postcss-selector-parser";const t=/:dir\([^)]*\)/;function r(r){const o=Object(r).dir,s=Boolean(Object(r).preserve),n=Boolean(Object(r).shadow);return{postcssPlugin:"postcss-dir-pseudo-class",Rule(r,{result:a}){let l,c=!1;if(t.test(r.selector)){try{l=e((t=>{t.nodes.forEach((t=>{t.walk((t=>{if("pseudo"!==t.type)return;if(":dir"!==t.value)return;const s=t.nodes.toString();if("rtl"!==s&&"ltr"!==s)return;const l=t.parent;l.nodes.filter((e=>"pseudo"===e.type&&":dir"===e.value)).length>1&&!c&&(c=!0,r.warn(a,`Hierarchical :dir pseudo class usage can't be transformed correctly to [dir] attributes. This will lead to incorrect selectors for "${r.selector}"`));const p=t.prev(),i=t.next(),u=p&&p.type&&"combinator"!==p.type,d=i&&i.type&&"combinator"!==i.type,v=i&&i.type&&("combinator"!==i.type||"combinator"===i.type&&" "===i.value);u||d||0===l.nodes.indexOf(t)&&v||1===l.nodes.length?t.remove():t.replaceWith(e.universal());const b=l.nodes[0],f=b&&"combinator"===b.type&&" "===b.value,y=b&&"tag"===b.type&&"html"===b.value,m=b&&"pseudo"===b.type&&":root"===b.value;!b||y||m||f||l.prepend(e.combinator({value:" "}));const h=o===s,g=e.attribute({attribute:"dir",operator:"=",quoteMark:'"',value:`"${s}"`}),w=e.pseudo({value:":host-context"});w.append(g);const x=e.pseudo({value:(y||m?"":"html")+":not"});x.append(e.attribute({attribute:"dir",operator:"=",quoteMark:'"',value:`"${"ltr"===s?"rtl":"ltr"}"`})),h?y?l.insertAfter(b,x):l.prepend(x):y?l.insertAfter(b,g):n&&!m?l.prepend(w):l.prepend(g)}))}))})).processSync(r.selector)}catch(e){return void r.warn(a,`Failed to parse selector : ${r.selector}`)}void 0!==l&&l!==r.selector&&(s?r.cloneBefore({selector:l}):r.selector=l)}}}}r.postcss=!0;export{r as default};
>>>>>>> deddbab02d39a340219c9cd34980ec39c98978cd
