<<<<<<< HEAD
import e from"postcss-selector-parser";const t=e().astSync(":link").nodes[0],n=e().astSync(":visited").nodes[0],s=e().astSync("area[href]").nodes[0],o=e().astSync("[href]").nodes[0];function r(r,l){let c=[];return e((r=>{let a=[];r.walkPseudos((r=>{if(":any-link"!==r.value.toLowerCase()||r.nodes&&r.nodes.length)return;if(!l)return void a.push([t.clone(),n.clone()]);const c=function(t){let n=[],s=t.prev();for(;s&&"combinator"!==s.type&&!e.isPseudoElement(s);)"tag"===s.type&&n.push(s.value.toLowerCase()),s=s.prev();let o=t.next();for(;o&&"combinator"!==o.type&&!e.isPseudoElement(o);)"tag"===o.type&&n.push(o.value.toLowerCase()),o=o.next();return n}(r);c.includes("area")?a.push([t.clone(),n.clone(),o.clone()]):c.length?a.push([t.clone(),n.clone()]):a.push([t.clone(),n.clone(),s.clone()])})),a.length&&function(...e){const t=[],n=e.length-1;function s(o,r){for(let l=0,c=e[r].length;l<c;l++){const c=o.slice(0);c.push(e[r][l]),r==n?t.push(c):s(c,r+1)}}return s([],0),t}(...a).forEach((t=>{const n=r.clone();n.walkPseudos((n=>{":any-link"!==n.value.toLowerCase()||n.nodes&&n.nodes.length||(!function(t,n,s){let o=s.type;"selector"===s.type&&s.nodes&&s.nodes.length&&(o=s.nodes[0].type);let r=-1,l=-1;const c=t.index(n);for(let n=c;n>=0&&("combinator"!==t.nodes[n].type&&!e.isPseudoElement(t.nodes[n].type));n--)r=n;if("tag"===o)return void t.insertBefore(t.at(r),s);for(let n=c;n<t.nodes.length&&("combinator"!==t.nodes[n].type&&!e.isPseudoElement(t.nodes[n].type));n++)l=n;for(let e=r;e<=l;e++)if(t.nodes[e].type===o)return void t.insertAfter(t.at(e),s);t.insertAfter(t.at(r),s)}(n.parent,n,t.shift()),n.remove())})),c.push(n.toString())}))})).processSync(r),c}function l(e){const t={preserve:!0,...e},n={areaHrefNeedsFixing:!1,...Object(t.subFeatures)};return{postcssPlugin:"postcss-pseudo-class-any-link",Rule(e,{result:s}){if(!e.selector.toLowerCase().includes(":any-link"))return;(e.raws.selector&&e.raws.selector.raw||e.selector).endsWith(":")||function(e,t,n,s){let o=[],l=[];try{for(let t=0;t<e.selectors.length;t++){const n=e.selectors[t],c=r(n,s);c.length?o.push(...c):l.push(n)}}catch(n){return void e.warn(t,`Failed to parse selector : ${e.selector}`)}o.length&&(e.cloneBefore({selectors:o}),l.length&&e.cloneBefore({selectors:l}),n||e.remove())}(e,s,t.preserve,n.areaHrefNeedsFixing)}}}l.postcss=!0;export{l as default};
=======
import e from"postcss-selector-parser";function t(t){if(!t||!t.nodes)return;let s=[];const o=[...t.nodes];for(let t=0;t<o.length+1;t++){const r=o[t];if(r&&"combinator"!==r.type)s.push(r);else{if(s.length>1){const t=e.selector({value:""});s[0].replaceWith(t),s.slice(1).forEach((e=>{e.remove()})),s.forEach((e=>{t.append(e)})),n(t),t.replaceWith(...t.nodes)}s=[]}}}function n(e){e&&e.nodes&&e.nodes.sort(((e,t)=>"selector"===e.type&&"selector"===t.type&&e.nodes.length&&t.nodes.length?s(e.nodes[0],e.nodes[0].type)-s(t.nodes[0],t.nodes[0].type):"selector"===e.type&&e.nodes.length?s(e.nodes[0],e.nodes[0].type)-s(t,t.type):"selector"===t.type&&t.nodes.length?s(e,e.type)-s(t.nodes[0],t.nodes[0].type):s(e,e.type)-s(t,t.type)))}function s(t,n){return e.isPseudoElement(t)?o.pseudoElement:o[n]}const o={universal:0,tag:1,id:2,class:3,attribute:4,selector:5,pseudo:6,pseudoElement:7,string:8,root:9,comment:10},r=e().astSync(":link").nodes[0],l=e().astSync(":visited").nodes[0],c=e().astSync("area[href]").nodes[0],a=e().astSync("[href]").nodes[0];function u(n,s){let o=[];return e((e=>{let n=[];e.walkPseudos((e=>{if(":any-link"!==e.value||e.nodes&&e.nodes.length)return;if(!s)return void n.push([r.clone(),l.clone()]);const t=function(e){let t=[],n=e.prev();for(;n&&"combinator"!==n.type;)"tag"===n.type&&t.push(n.value),n=n.prev();let s=e.next();for(;s&&"combinator"!==s.type;)"tag"===s.type&&t.push(s.value),s=s.next();return t}(e);t.includes("area")?n.push([r.clone(),l.clone(),a.clone()]):t.length?n.push([r.clone(),l.clone()]):n.push([r.clone(),l.clone(),c.clone()])})),n.length&&function(...e){const t=[],n=e.length-1;function s(o,r){for(let l=0,c=e[r].length;l<c;l++){const c=o.slice(0);c.push(e[r][l]),r==n?t.push(c):s(c,r+1)}}return s([],0),t}(...n).forEach((n=>{const s=e.clone();s.walkPseudos((e=>{":any-link"!==e.value||e.nodes&&e.nodes.length||e.replaceWith(...n.shift().nodes)})),s.walk((e=>{"nodes"in e&&(e.nodes.forEach((e=>{t(e)})),t(e))})),o.push(s.toString())}))})).processSync(n),o}const p=/:any-link/;function i(e){const t={preserve:!0,...e},n={areaHrefNeedsFixing:!1,...Object(t.subFeatures)};return{postcssPlugin:"postcss-pseudo-class-any-link",Rule(e,{result:s}){if(!p.test(e.selector))return;const o=e.raws.selector&&e.raws.selector.raw||e.selector;":"!==o[o.length-1]&&function(e,t,n,s){let o=[],r=[];try{for(let t=0;t<e.selectors.length;t++){const n=e.selectors[t],l=u(n,s);l.length?o.push(...l):r.push(n)}}catch(n){return void e.warn(t,`Failed to parse selector : ${e.selector}`)}o.length&&(e.cloneBefore({selectors:o}),n?r.length&&e.cloneBefore({selectors:r}):r.length?e.selectors=r:e.remove())}(e,s,t.preserve,n.areaHrefNeedsFixing)}}}i.postcss=!0;export{i as default};
>>>>>>> deddbab02d39a340219c9cd34980ec39c98978cd
